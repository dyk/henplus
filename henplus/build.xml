<!-- $Id: build.xml,v 1.7 2002-02-11 16:33:02 hzeller Exp $ -->
<project name="HenPlus" default="compile" basedir=".">
     <!-- properties -->
     <property name="version"              value="0.2.1" />
     <property name="src"                  value="src" />
     <property name="bin"                  value="bin" />
     <property name="lib"                  value="lib" />
     <property name="build"                value="build" />
     <property name="classes"              value="${build}/classes" />
     <property name="build.compiler"       value="jikes" />
     <property name="build.compiler.emacs" value="true" />
     <property name="tarbase"              value="henplus-${version}" />

     <target name="prepare">
        <mkdir dir="${build}"/>
        <mkdir dir="${classes}"/>
     </target>

     <target name="compile" depends="prepare" description="compile it">
        <javac srcdir="${src}" destdir="${classes}" />
     </target>
     
     <target name="jar" depends="compile" description="make jar">
        <jar file="${build}/henplus.jar" manifest="manifest.txt">
           <fileset dir="${classes}">
              <include name="**/*.class"/>
           </fileset>
        </jar>
     </target>

     <target name="dist" description="create distribution tar">
       <mkdir dir="${tarbase}" />
       <copy todir="${tarbase}">
          <fileset dir=".">
            <include name="${src}/**" />
            <include name="${bin}/**" />
            <include name="build.xml" />
            <include name="henplus.spec" />
            <include name="manifest.txt" />
	    <exclude name="**/CVS" />
	    <exclude name="**/*.class" />
	    <exclude name="**/*.jar" />
	    <exclude name="**/*~" />
          </fileset>
       </copy>

       <tar tarfile="${tarbase}.tar">
         <tarfileset dir="." mode="755">
           <include name="${tarbase}/bin/henplus" />
         </tarfileset>
         <tarfileset dir=".">
           <include name="${tarbase}/**"/>
           <exclude name="${tarbase}/bin/henplus" />
         </tarfileset>
       </tar>
       <gzip zipfile="${tarbase}.tar.gz" src="${tarbase}.tar" />

       <delete file="${tarbase}.tar" />
       <delete dir="${tarbase}"/>
     </target>

     <target name="clean" description="remove">
        <delete file="${tarbase}.tar" />
        <delete file="${tarbase}.tar.gz" />
        <delete dir="${tarbase}"/>
        <delete dir="${classes}"/>
        <delete dir="${build}"/>
     </target>
</project>
